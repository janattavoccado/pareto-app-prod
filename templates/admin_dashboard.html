
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pareto Admin</title>
    <style>
        body { font-family: sans-serif; margin: 0; background-color: #f4f4f4; }
        .container { max-width: 1200px; margin: auto; padding: 20px; }
        .hidden { display: none; }
        .modal { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); display: none; align-items: center; justify-content: center; }
        .modal.active { display: flex; }
        .modal-content { background: white; padding: 20px; border-radius: 5px; width: 400px; }
        .sidebar { width: 200px; background: #333; color: white; position: fixed; height: 100%; padding-top: 20px; }
        .sidebar a { display: block; color: white; padding: 10px; text-decoration: none; }
        .main-content { margin-left: 220px; }
        table { width: 100%; border-collapse: collapse; }
        th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }
        th { background-color: #f2f2f2; }
    </style>
</head>
<body>

    <div class="sidebar">
        <a href="#" onclick="showPage("dashboard")">Dashboard</a>
        <a href="#" onclick="showPage("users")">Users</a>
        <a href="#" onclick="showPage("tenants")">Tenants</a>
    </div>

    <div class="main-content">
        <div id="dashboard" class="page">
            <h2>Dashboard</h2>
            <p>Welcome to the Pareto Admin Dashboard.</p>
        </div>

        <div id="users" class="page hidden">
            <h2>Users</h2>
            <button onclick="openUserModal()">Add New User</button>
            <table id="usersTable"></table>
        </div>

        <div id="tenants" class="page hidden">
            <h2>Tenants</h2>
            <button onclick="openTenantModal()">Add New Tenant</button>
            <table id="tenantsTable"></table>
        </div>
    </div>

    <!-- Login Modal -->
    <div id="loginModal" class="modal active">
        <div class="modal-content">
            <h3>Pareto Admin Login</h3>
            <form id="loginForm">
                <input type="text" id="username" placeholder="Username" required><br><br>
                <input type="password" id="password" placeholder="Password" required><br><br>
                <button type="submit">Login</button>
            </form>
        </div>
    </div>

    <!-- User Modal -->
    <div id="userModal" class="modal">
        <div class="modal-content">
            <h3 id="userModalTitle">Add User</h3>
            <form id="userForm">
                <input type="hidden" id="userId">
                <select id="userTenant" required></select><br><br>
                <input type="text" id="userPhone" placeholder="Phone Number" required><br><br>
                <input type="email" id="userEmail" placeholder="Email"><br><br>
                <input type="text" id="userFirstName" placeholder="First Name"><br><br>
                <input type="text" id="userLastName" placeholder="Last Name"><br><br>
                <select id="userStatus"><option value="true">Enabled</option><option value="false">Disabled</option></select><br><br>
                <button type="submit">Save</button>
                <button type="button" onclick="hideModal("userModal")">Cancel</button>
            </form>
        </div>
    </div>

    <!-- Tenant Modal -->
    <div id="tenantModal" class="modal">
        <div class="modal-content">
            <h3 id="tenantModalTitle">Add Tenant</h3>
            <form id="tenantForm">
                <input type="hidden" id="tenantId">
                <input type="text" id="tenantName" placeholder="Tenant Name" required><br><br>
                <select id="tenantStatus"><option value="true">Active</option><option value="false">Inactive</option></select><br><br>
                <button type="submit">Save</button>
                <button type="button" onclick="hideModal("tenantModal")">Cancel</button>
            </form>
        </div>
    </div>

    <script>
        const API_BASE_URL = "/api";
        let sessionToken = null;

        document.addEventListener("DOMContentLoaded", () => {
            const loginForm = document.getElementById("loginForm");
            loginForm.addEventListener("submit", handleLogin);

            // Add other form handlers here
        });

        async function handleLogin(e) {
            e.preventDefault();
            const username = document.getElementById("username").value;
            const password = document.getElementById("password").value;

            try {
                const response = await fetch(`${API_BASE_URL}/auth/login`, {
                    method: "POST",
                    headers: { "Content-Type": "application/json" },
                    body: JSON.stringify({ username, password })
                });
                const data = await response.json();
                if (data.success) {
                    sessionToken = data.session_token;
                    hideModal("loginModal");
                    showPage("dashboard");
                } else {
                    alert("Login failed: " + data.message);
                }
            } catch (error) {
                alert("An error occurred during login.");
            }
        }

        function showPage(pageId) {
            document.querySelectorAll(".page").forEach(page => page.classList.add("hidden"));
            document.getElementById(pageId).classList.remove("hidden");
        }

        function hideModal(modalId) {
            document.getElementById(modalId).classList.remove("active");
        }

        // Add other functions for CRUD operations here

    </script>

</body>
</html>
